syntax = "proto3";
package bastionlab;

message ReferenceRequest {
    string identifier = 1;
}

message ReferenceResponse {
    string identifier = 1;
    string header = 2;
}

message ReferenceList {
    repeated ReferenceResponse list = 1;
}

message Chunk {
    bytes data = 1;
}

message Query {
    string composite_plan = 1;
}

message Empty {}

message ChallengeResponse {
    bytes value = 1;
}

message Session {
    bytes token = 1;
}


service BastionLab {
    rpc SendDataFrame (stream Chunk) returns (ReferenceResponse) {}
    rpc RunQuery (Query) returns (ReferenceResponse) {}
    rpc FetchDataFrame(ReferenceRequest) returns (stream Chunk) {}
    rpc GetChallenge (Empty) returns (ChallengeResponse) {}
    rpc ListDataFrames (Empty) returns (ReferenceList) {}
    rpc GetDataFrameHeader (ReferenceRequest) returns (ReferenceResponse) {}
    rpc CreateSession (Empty) returns (Session) {}
    rpc RefreshSession (Empty) returns (Empty) {}
}
